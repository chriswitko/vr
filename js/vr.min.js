!function(t,e){top!=self&&top.location.replace(self.location.href);var a=t(e),i=t("body"),r=t(document),o={ensureValidProtocol:function(t,e){var a=t.val().substring(0,4),i=new RegExp("://");i.test(t.val())&&"http"!=a&&(alert("Invalid protocol detected. Unfortunately, only HTTP and HTTPS protocols will work  =("),t.focus().select(),e.stopPropagation(),e.preventDefault())},createBookmarklet:function(){var t,a=document.title,i=e.location.href;e.sidebar?e.sidebar.addPanel(a,i):e.external?e.external.AddFavorite(i,a):e.opera&&e.print&&(t=document.createElement("a"),t.setAttribute("href",i),t.setAttribute("title",a),t.setAttribute("rel","sidebar"),t.click())},getParameterByName:function(t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var e=new RegExp("[\\?&]"+t+"=([^&#]*)"),a=e.exec(location.search);return null===a?"":decodeURIComponent(a[1].replace(/\+/g," "))},init:function(){delete this.init,t('[rel="bookmark"]').attr("href","javascript:document.location='"+document.location+"?url=' + document.location.href;");var e=this.url=this.getParameterByName("url");e.length>0&&("http"!=e.substr(0,4)&&(e="http://"+e),this.url=e,t('[name="url"]').val(this.url),t("#vrFrame").attr("src",this.url),t("#indexPage").hide(),t("#vrpage").show()),n(),c()}},c=function(){var e=t.cookie("vr-device"),a=t.cookie("vr-orientation");e&&t('[data-device="'+e+'"]').trigger("click"),"landscape"===a&&t("#btnToggleRotate").trigger("click")},n=function(){var e=t("button[data-viewport-width]"),c=t("#vrFrame"),n=t("button[data-rotate=true]"),l=t("#vr"),s=function(){t("#closeResizer").length>0?d():document.location=document.getElementById("btnVRClose").getAttribute("href")},d=function(){var t=a.width(),i=a.height();e.removeClass("asphalt active").addClass("charcoal"),c.css({"max-width":t,"max-height":i}),l.fadeOut(500,function(){document.location=c[0].contentWindow.location.href})};i.on("click","button[data-viewport-width]",function(a){var i=this.getAttribute("data-viewport-width"),r=this.getAttribute("data-viewport-height"),o=t(this),n=this.getAttribute("data-device");return e.removeClass("asphalt active").addClass("charcoal"),o.addClass("asphalt active").removeClass("charcoal"),t.cookie("vr-device",n),c.css({"max-width":i,"max-height":r}),a.preventDefault(),!1}).on("click","button.rotate",function(e){n.each(function(){var e=t(this).toggleClass("landscape"),a=e.attr("data-viewport-width"),i=e.attr("data-viewport-height");e.attr("data-viewport-width",i),e.attr("data-viewport-height",a),e.hasClass("active")&&(e.trigger("click"),e.hasClass("landscape")?t.cookie("vr-orientation","landscape"):t.removeCookie("vr-orientation"))})}).on("click","button.refresh",function(e){t(this).find('i[class*="icon-"]').addClass("icon-rotate-360"),c[0].contentWindow.location.reload(!0)}).on("click","#closeResizer",function(t){d()}).on("click","[data-toggle]",function(e){var a=t(this.getAttribute("data-toggle"));a.slideToggle(150,function(){a.is(":visible")&&a.find('[name="url"]').focus().select()})}).on("keyup","input",function(e){27==e.keyCode&&(t("[data-toggle]").first().trigger("click"),t('[name="url"]').val(o.url)),e.stopPropagation()}).on("keypress",'[name="url"]',function(e){13==e.keyCode&&o.ensureValidProtocol(t(this),e)}).on("click",'button[type="submit"]',function(e){o.ensureValidProtocol(t(this).parents("form").find('[name="url"]'),e)}).on("click",'[rel="bookmark"]',function(t){return t.preventDefault(),!1}),r.on("keyup",function(e){switch(e.keyCode){case 27:t("[data-toggle]").first().trigger("click");break;case 49:t('[data-device="fullscreen"]').trigger("click");break;case 50:t('[data-device="desktop"]').trigger("click");break;case 51:t('[data-device="macbook"]').trigger("click");break;case 52:t('[data-device="ipad"]').trigger("click");break;case 53:t('[data-device="tablet"]').trigger("click");break;case 54:t('[data-device="android"]').trigger("click");break;case 55:t('[data-device="iphone"]').trigger("click");break;case 32:case 56:case 82:t(".rotate").trigger("click");break;case 88:s()}}),t("form").on("submit",function(e){return""===t(this).find('[name="url"]').val()?(e.preventDefault(),e.stopPropagation(),!1):void 0})};t(function(){o.init()})}(jQuery,window);